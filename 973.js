/*! For license information please see 973.js.LICENSE.txt */
"use strict";(self.webpackChunkhttp_step_extension=self.webpackChunkhttp_step_extension||[]).push([[973],{33973:(e,n,t)=>{t.r(n);var r=t(54896),s=t(82672),a=t(85893);const o=({parameters:e,handleChange:n})=>{const t=[];return e.forEach(((e,s,o)=>{t.push((0,a.jsx)(r.FormGroup,{label:s,fieldId:"id"+s,children:(0,a.jsx)(r.TextInput,{value:e,label:s,id:"idTextInput-"+s,name:"nameTextInput"+s,onChange:e=>{n(s,e)}})},"key"+s+o))})),t.length>0&&(0,a.jsx)(r.FormGroup,{label:"Parameters",fieldId:"simple-form-note-01",children:t})},i=e=>{const[n]=e.endpoint.operations.keys(),[t,i]=(0,s.useState)(n),l=(0,s.useRef)(new Map),[p,c]=(0,s.useState)(""),u=x(m(t)),[d]=l.current?.keys(),[h]=u.keys();function m(n){return e.endpoint.operations.get(n)}function x(e){const n=new Map;return e?.parameters?.forEach((e=>{n.set(e.name,"")})),n}function j(e){const n=x(m(e));l.current=new Map(n),i(e)}0!==l.current.size&&h===d||(l.current=u);const f=[];e.endpoint.operations.forEach(((e,n)=>{f.push((0,a.jsx)(r.FormSelectOption,{label:n,value:n},n))}));const b=new Array;return m(t)?.produces.forEach((e=>{b.push((0,a.jsx)(r.FormSelectOption,{label:e,value:e},e))})),(0,s.useEffect)((()=>{m(n)?.produces&&e.setContentType(m(n)?.produces[0]),j(n)}),[e.endpoint]),(0,a.jsxs)("div",{children:[!e.isSource&&(0,a.jsx)(r.FormGroup,{label:"Operation",children:(0,a.jsx)(r.FormSelect,{"aria-label":"OperationSelect",onChange:j,value:t,children:f})}),(0,a.jsx)(r.FormGroup,{label:"Produces",children:(0,a.jsx)(r.FormSelect,{"aria-label":"ContentTypeSelect",onChange:n=>{e.setContentType(n),c(n)},value:p,children:b})}),(0,a.jsx)(o,{parameters:l.current,handleChange:(n,r)=>{l.current.set(n,r);let s=e.endpoint.name,a="";l.current.forEach(((e,n)=>{if(e){const r=function(e){let n;return m(t)?.parameters?.forEach((t=>{t.name.toString()===e&&(n=t)})),n}(n);"path"===r.in?s=s.replace(`{${n}}`,e):"query"===r.in&&(a+=`&${n}=${e}`)}})),a.length>0&&(a="?"+a.substr(1)),e.setUrl(s+a)}}),(0,a.jsx)(r.FormGroup,{label:"Info",children:(0,a.jsxs)(r.Grid,{children:[(0,a.jsx)(r.GridItem,{span:6,children:"Summary"}),(0,a.jsx)(r.GridItem,{span:6,children:(0,a.jsx)("div",{children:m(t)?.summary})}),m(t)?.description&&(0,a.jsxs)("div",{children:[(0,a.jsx)(r.GridItem,{span:6,children:"Description"}),(0,a.jsx)(r.GridItem,{span:6,children:(0,a.jsx)("div",{children:m(t)?.description})})]}),(0,a.jsx)(r.GridItem,{span:6,children:"Tags"}),(0,a.jsx)(r.GridItem,{span:6,children:(0,a.jsx)(r.Label,{children:m(t)?.tags})})]})})]})},l=new Map([["ms",1],["s",1e3],["min",6e4],["hour",36e5],["day",864e5]]),p=e=>{const[n,t]=(0,s.useState)(e.initTimeUnit),[o,i]=(0,s.useState)(e.initPeriodInputValue);return(0,a.jsx)(r.FormGroup,{label:"Period",children:(0,a.jsxs)(r.Grid,{children:[(0,a.jsx)(r.GridItem,{span:4,children:(0,a.jsx)(r.TextInput,{value:o,onChange:i,type:"number","aria-label":"period"})}),(0,a.jsx)(r.GridItem,{span:8,children:(0,a.jsxs)(r.FormSelect,{id:"period-01",name:"simple-form-number",value:n,onChange:function(n){const r=l.get(n);t(n),r&&e.setTimePeriod(o*r)},children:[(0,a.jsx)(r.FormSelectOption,{value:"ms",label:"Miliseconds",isDisabled:!1},"ms"),(0,a.jsx)(r.FormSelectOption,{value:"s",label:"Seconds",isDisabled:!1},"s"),(0,a.jsx)(r.FormSelectOption,{value:"min",label:"Minutes",isDisabled:!1},"min"),(0,a.jsx)(r.FormSelectOption,{value:"hour",label:"Hours",isDisabled:!1},"hour"),(0,a.jsx)(r.FormSelectOption,{value:"day",label:"Days",isDisabled:!1},"day")]})})]})})};var c=t(70578),u=t.n(c),d=t(25108);const h=e=>{let n=e.stepParams?.period,t="s";l.forEach(((r,s)=>{const a=e.stepParams?.period||1;a/r>=1&&a%r==0&&(n=a/r,t=s)}));const[o,c]=(0,s.useState)(""),h=(0,s.useRef)([]),[m,x]=(0,s.useState)({name:"",pathItem:{},operations:new Map}),[j,f]=(0,s.useState)(!1),[b,y]=(0,s.useState)(""),[S,v]=(0,s.useState)(""),[I,T]=(0,s.useState)({url:e.stepParams?.url||"",period:e.stepParams?.period||1,contentType:e.stepParams?.contentType||""}),[C,g]=(0,s.useState)(""),[F,G]=(0,s.useState)("https://api.chucknorris.io/documentation"),O=async e=>{h.current=await async function(e,n){let t=new(u());const r=[];let s;try{s=await t.validate(e,{dereference:{circular:"ignore"}}),Object.entries(t.api.paths).forEach((e=>{const t=new Map;let s=!1;Object.entries(e[1]).forEach((e=>{n?("GET"===e[0].toUpperCase()&&(s=!0),t.set(e[0],e[1])):t.set(e[0],e[1])})),n?s&&r.push({name:e[0],pathItem:e[1],operations:t}):r.push({name:e[0],pathItem:e[1],operations:t})}))}catch(e){d.error("error "+e)}return r}(e,P()),x(h.current[0])};function P(){const n=e.step?.name.toString();return n?.includes("source")}(0,s.useEffect)((()=>{let e="";j&&""!==o&&(e=JSON.parse(o),O(e).catch(d.error))}),[o,j]);const E=[];h.current.forEach(((e,n)=>{E.push((0,a.jsx)(r.FormSelectOption,{value:n,label:e.name,isDisabled:!1},e.name))}));const _=(e,n)=>{y(e);const t=I;void 0!==n?(g(n),t.url=n+e):t.url=C+e,T(t)};function k(e,n,t){const r={period:t>0?t:I.period,url:""!==e?e:I.url,contentType:""!==n?n:I.contentType};T(r)}return(0,a.jsxs)(r.Form,{children:[(0,a.jsxs)(r.FormGroup,{label:"OpenApi",fieldId:"open-api-file-upload",children:[(0,a.jsx)(r.Checkbox,{id:"inputType",label:"Upload spec",isChecked:j,onChange:f}),j&&(0,a.jsx)(r.FileUpload,{id:"simple-file",value:o,filenamePlaceholder:"Drag and drop a open API spec or upload one",onFileInputChange:(e,n)=>{n.text().then((e=>{c(e)}))},onClearClick:e=>{c("")},browseButtonText:"Upload"}),!j&&(0,a.jsxs)(r.InputGroup,{children:[(0,a.jsx)(r.TextInput,{id:"specUrlInput","aria-label":"Api spec url",value:F,onChange:G}),(0,a.jsx)(r.Button,{onClick:()=>{const e=new URL(F);O(F).catch(d.error),_("",e.origin)},children:"Load"})]})]}),(0,a.jsx)(r.FormGroup,{label:"Base Path",children:(0,a.jsxs)(r.Grid,{children:[(0,a.jsx)(r.GridItem,{span:6,children:(0,a.jsx)(r.TextInput,{id:"basePathInput","aria-label":"Base path",value:C,onChange:e=>{_(b,e)}})}),(0,a.jsx)(r.GridItem,{span:6,children:(0,a.jsx)(r.FormSelect,{minLength:500,type:"text",id:"simple-form-note-01",name:"simple-form-number",value:S,onChange:function(e){const n=Number(e);v(e),x(h.current[n]),_(h.current[n]?.name)},children:E})})]})}),""!==m?.name&&(0,a.jsx)(i,{endpoint:m,isSource:P(),setUrl:_,setContentType:e=>{k("",e,0)}}),P()&&(0,a.jsx)(p,{initTimeUnit:t,initPeriodInputValue:n,setTimePeriod:e=>{k("","",e)}}),(0,a.jsx)(r.FormGroup,{label:"URL",children:(0,a.jsx)(r.TextInput,{onChange:e=>k(e,"",0),value:I.url,"aria-label":"url-read-only"})}),(0,a.jsx)(r.FormGroup,{label:"Content Type",children:(0,a.jsx)(r.TextInput,{onChange:e=>k("",e,0),value:I.contentType,"aria-label":"url-read-only"})}),(0,a.jsx)(r.ActionGroup,{children:(0,a.jsx)(r.Button,{variant:"primary",onClick:function(){e.notifyKaoto("Http step updated"),P()?e.updateStepParams(I):e.updateStepParams({url:I.url,contentType:I.contentType})},children:"Apply"})})]})};t(1298),t(36699),t(73175),t(46530),t(99574),t(9750);const m=()=>(0,a.jsxs)("div",{className:"App",children:[(0,a.jsx)("header",{className:"App-header",children:(0,a.jsx)("p",{})}),(0,a.jsx)(h,{})]});var x=t(20745);const j=document.getElementById("app");(0,x.s)(j).render((0,a.jsx)(m,{}))},20745:(e,n,t)=>{var r=t(31051);n.s=r.createRoot,r.hydrateRoot},75251:(e,n,t)=>{var r=t(82672),s=Symbol.for("react.element"),a=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(e,n,t){var r,l={},p=null,c=null;for(r in void 0!==t&&(p=""+t),void 0!==n.key&&(p=""+n.key),void 0!==n.ref&&(c=n.ref),n)a.call(n,r)&&!i.hasOwnProperty(r)&&(l[r]=n[r]);if(e&&e.defaultProps)for(r in n=e.defaultProps)void 0===l[r]&&(l[r]=n[r]);return{$$typeof:s,type:e,key:p,ref:c,props:l,_owner:o.current}}n.jsx=l,n.jsxs=l},85893:(e,n,t)=>{e.exports=t(75251)}}]);
//# sourceMappingURL=973.js.map